
<!DOCTYPE html>
<html lang="en-us">
<head>
  
  <meta charset="UTF-8" />
  <meta name="description" content="Jestæ˜¯ä¸€æ¬¾ä¼˜é›…ã€ç®€æ´çš„ JavaScript æµ‹è¯•æ¡†æ¶ã€‚æ”¯æŒ Babelã€TypeScriptã€Nodeã€Reactã€Angularã€Vue ç­‰è¯¸å¤šæ¡†æ¶ï¼" />
  <title>
    ä»Šå¤©å­¦åˆ°äº† Jest å•å…ƒæµ‹è¯• | DenysGçš„ä¸ªäººåšå®¢
  </title>
  
  <meta name="viewport" content="width=device-width,user-scalable=no,maximum-scale=1,initial-scale=1">
  
  <link rel="canonical" href="https://48474.net/post/jest-guide/"/>
  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/sanitize.css">
  <link rel="stylesheet" href="/css/responsive.css">
  <link rel="stylesheet" href="/css/highlight_monokai.css">
  <link rel="stylesheet" href="/css/theme.css">
  <link rel="stylesheet" href="/css/custom.css">
  
  
  <link href="https://48474.net//index.xml" rel="alternate" type="application/rss+xml" title="DenysGçš„ä¸ªäººåšå®¢" />
  <link href="https://48474.net//index.xml" rel="feed" type="application/rss+xml" title="DenysGçš„ä¸ªäººåšå®¢" />

  
  

</head>



<body>
<div class="container">
  
  <header role="banner">
    <div class="row gutters">
      <div id="site-title" class="col span_6">
        <h1><a href="https://48474.net/">DenysGçš„ä¸ªäººåšå®¢</a></h1>
        <h2>æˆ‘å¿…é¡»æ‰¿è®¤ï¼Œå¹¸è¿å–œæ¬¢ç…§é¡¾å‹‡æ•¢çš„äººã€‚---- è¾¾å°”æ–‡</h2>
      </div>
      <div id="social" class="col span_6">
        <ul>
          
          
          <li><a href="https://github.com/cnphpbb/" target="_blank">GitHub</a></li>
          
        </ul>
      </div>
    </div>
  </header>


  
  <main id="single" role="main">
    <div class="article-header">
      <h1>ä»Šå¤©å­¦åˆ°äº† Jest å•å…ƒæµ‹è¯•</h1>
      <div class="meta">
        Aug 10, 2022 &nbsp;
        
          #<a href="/tags/jest">jest</a>&nbsp;
        
          #<a href="/tags/guide">guide</a>&nbsp;
        
          #<a href="/tags/solutions">solutions</a>&nbsp;
        
          #<a href="/tags/javascript">JavaScript</a>&nbsp;
        
          #<a href="/tags/vue">vue</a>&nbsp;
        
          #<a href="/tags/%E5%BC%80%E6%BA%90">å¼€æº</a>&nbsp;
        
      </div>
    </div>
    <article>
      <p><strong>Jest æ˜¯ä¸€æ¬¾ä¼˜é›…ã€ç®€æ´çš„ JavaScript æµ‹è¯•æ¡†æ¶ã€‚</strong></p>
<p><strong>Jest æ”¯æŒ Babelã€TypeScriptã€Nodeã€Reactã€Angularã€Vue ç­‰è¯¸å¤šæ¡†æ¶ï¼</strong></p>
<p>æœ‰å¹¸å‚ä¸äº†ä¸€ä¸ªå¾®ä¿¡å°ç¨‹åºé¡¹ç›®å‰ç«¯å¼€å‘ï¼Œæ­¤é¡¹ç›®ä½¿ç”¨ uniapp vue2å¼€å‘ã€‚ æ¥è§¦äº†ä¸€æ¬¡jestå•å…ƒæµ‹è¯•ï¼Œå†™ä¸‹ç¬”è®°æœ‰ç›Šäºä»¥åç»§ç»­å­¦ä¹ å’Œå›é¡¾ã€‚</p>
<p>ä¸ºäº†ä¿è¯é¡¹ç›®ä¸­ä»£ç æ–¹æ³•çš„æ­£ç¡®æ€§ï¼Œå¿…ç„¶å°±éœ€è¦å»åšå•å…ƒæµ‹è¯•ã€‚é€‰æ‹©äº† Jest æµ‹è¯•æ¡†æ¶ã€‚</p>
<h3 id="jestå•å…ƒæµ‹è¯•npmåŒ…">jestå•å…ƒæµ‹è¯•NPMåŒ…</h3>
<p>åœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">yarn add --dev jest <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  babel-jest <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  @babel/core <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  @babel/preset-env <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  @vue/vue2-jest <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  @vue/test-utils <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  jsdom <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  jest-environment-jsdom
</span></span></code></pre></div><p>éœ€è¦æ³¨æ„ä¸‹ Vue2 ç‰ˆæœ¬ä¸­npmåŒ…çš„ç‰ˆæœ¬</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="s2">&#34;@babel/preset-env&#34;</span>: <span class="s2">&#34;^7.18.10&#34;</span>,
</span></span><span class="line"><span class="cl"><span class="s2">&#34;@vue/test-utils&#34;</span>: <span class="s2">&#34;^1.2.0&#34;</span>
</span></span><span class="line"><span class="cl"><span class="s2">&#34;@vue/test-utils&#34;</span>: <span class="s2">&#34;^1.3.0&#34;</span>,
</span></span><span class="line"><span class="cl"><span class="s2">&#34;@vue/vue2-jest&#34;</span>: <span class="s2">&#34;^28.0.1&#34;</span>,
</span></span><span class="line"><span class="cl"><span class="s2">&#34;babel-jest&#34;</span>: <span class="s2">&#34;^28.1.3&#34;</span>,
</span></span><span class="line"><span class="cl"><span class="s2">&#34;jest&#34;</span>: <span class="s2">&#34;^28.1.3&#34;</span>,
</span></span><span class="line"><span class="cl"><span class="s2">&#34;jest-environment-jsdom&#34;</span>: <span class="s2">&#34;^28.1.3&#34;</span>,
</span></span><span class="line"><span class="cl"><span class="s2">&#34;jsdom&#34;</span>: <span class="s2">&#34;^20.0.0&#34;</span>,
</span></span></code></pre></div><p>ä»¥ä¸Šå†…å®¹ç›´æ¥æ·»åŠ åˆ° <code>package.json</code> æ–‡ä»¶ <code>devDependencies</code> èŠ‚ç‚¹ä¸­ï¼Œ æ‰§è¡Œ <code>yarn install</code> å³å¯ã€‚ ğŸš§</p>
<h3 id="jestå•å…ƒæµ‹è¯•é…ç½®">jestå•å…ƒæµ‹è¯•é…ç½®</h3>
<ul>
<li>jest.config.js</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">testEnvironment</span><span class="o">:</span> <span class="s2">&#34;jsdom&#34;</span><span class="p">,</span> <span class="c1">//ç”¨äºæµ‹è¯•çš„æµ‹è¯•ç¯å¢ƒ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">testMatch</span><span class="o">:</span> <span class="p">[</span> <span class="c1">//æ£€æµ‹æµ‹è¯•æ–‡ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="s1">&#39;**/test/units/**/?(*.)+(spec|test).[jt]s?(x)&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nx">moduleNameMapper</span><span class="o">:</span> <span class="p">{</span> <span class="c1">//æ˜ å°„è·¯å¾„åˆ°æ¨¡å—åç§° å®Œæˆ`@/`çš„è·¯å¾„æ˜ å°„
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="s2">&#34;^@/(.*)$&#34;</span><span class="o">:</span> <span class="s2">&#34;&lt;rootDir&gt;/$1&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">transform</span><span class="o">:</span> <span class="p">{</span>    <span class="c1">//è½¬æ¢å™¨è·¯å¾„çš„æ˜ å°„
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="s2">&#34;^.+\.js$&#34;</span><span class="o">:</span> <span class="s2">&#34;babel-jest&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;^.+\.vue$&#34;</span><span class="o">:</span> <span class="s2">&#34;@vue/vue2-jest&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">moduleFileExtensions</span><span class="o">:</span> <span class="p">[</span> <span class="c1">//ä½¿ç”¨çš„æ–‡ä»¶æ‰©å±•å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="s2">&#34;js&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;vue&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nx">collectCoverage</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>  <span class="c1">//æ”¶é›†æµ‹è¯•æ—¶çš„è¦†ç›–ç‡ä¿¡æ¯
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">coverageDirectory</span><span class="o">:</span> <span class="s1">&#39;&lt;rootDir&gt;/test/coverage&#39;</span><span class="p">,</span>   <span class="c1">//è¾“å‡ºå…¶è¦†ç›–èŒƒå›´æ–‡ä»¶çš„ç›®å½•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">testPathIgnorePatterns</span><span class="o">:</span> <span class="p">[</span>   <span class="c1">//å¿½ç•¥çš„ç›®å½•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="s2">&#34;&lt;rootDir&gt;/node_modules/&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nx">transformIgnorePatterns</span><span class="o">:</span> <span class="p">[</span>  <span class="c1">//è½¬æ¢å™¨å¿½ç•¥çš„ç›®å½•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="s2">&#34;&lt;rootDir&gt;/node_modules/&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>åœ¨ <code>jest.config.js</code> ä¸­ <code>testMatch</code>èŠ‚ç‚¹é…ç½®äº†æµ‹è¯•æ–‡ä»¶çš„ç›®å½• <code>test/units</code>ã€‚ åœ¨ç ”å‘æ—¶è¦åœ¨è¿™é‡Œå†™å…¥å•å…ƒæµ‹è¯•çš„æ–‡ä»¶ã€‚ ğŸ”¥</p>
<ul>
<li>.babelrc</li>
</ul>
<pre tabindex="0"><code class="language-json5" data-lang="json5">{
    presets: [
        [
            &#34;@babel/preset-env&#34;,
            {
                &#34;targets&#34;: {
                    &#34;node&#34;: &#34;current&#34;
                }
            }
        ]
    ]
}
</code></pre><ul>
<li>package.json</li>
</ul>
<p>åœ¨ <code>package.json</code> ä¸­ <code>scripts</code> èŠ‚ç‚¹ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®ã€‚</p>
<pre tabindex="0"><code class="language-json5" data-lang="json5">{
  &#34;scripts&#34;: {
    ......
    &#34;test:mp-weixin&#34;: &#34;cross-env UNI_PLATFORM=mp-weixin jest -i&#34;,
    ......
  },
}
</code></pre><p>åœ¨è¿›è¡Œå•å…ƒæµ‹è¯•æ—¶ï¼Œåœ¨ç»ˆç«¯ä¸­å°±å¯ä»¥çœ‹åˆ°æ‰§è¡Œç»“æœå’Œè¦†ç›–ç‡æŠ¥å‘Šã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">yarn test:mp-weixin
</span></span></code></pre></div><h3 id="å•å…ƒæµ‹è¯•å¸¸ç”¨api">å•å…ƒæµ‹è¯•å¸¸ç”¨API</h3>
<ul>
<li><a href="https://www.jestjs.cn/docs/api#describename-fn">describe</a></li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">myBeverage</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">delicious</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">sour</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;my beverage&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">test</span><span class="p">(</span><span class="s1">&#39;is delicious&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">expect</span><span class="p">(</span><span class="nx">myBeverage</span><span class="p">.</span><span class="nx">delicious</span><span class="p">).</span><span class="nx">toBeTruthy</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">test</span><span class="p">(</span><span class="s1">&#39;is not sour&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">expect</span><span class="p">(</span><span class="nx">myBeverage</span><span class="p">.</span><span class="nx">sour</span><span class="p">).</span><span class="nx">toBeFalsy</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></div><ul>
<li><a href="https://www.jestjs.cn/docs/api#testname-fn-timeout">test</a></li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="nx">test</span><span class="p">(</span><span class="s1">&#39;has lemon in it&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">fetchBeverageList</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="nx">list</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">expect</span><span class="p">(</span><span class="nx">list</span><span class="p">).</span><span class="nx">toContain</span><span class="p">(</span><span class="s1">&#39;lemon&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></div><p>å‚è€ƒç½‘å€ï¼š</p>
<ul>
<li><a href="https://blog.csdn.net/u012961419/article/details/123638655">Jest å­¦ä¹ 04 - DOM æµ‹è¯•ã€å¿«ç…§æµ‹è¯•ã€æµ‹è¯•è¦†ç›–ç‡</a></li>
<li><a href="https://juejin.cn/post/6946580423954661384">åœ¨uniappæ¡†æ¶ä¸‹å®ç°ç”¨jestè¿›è¡Œh5ç¯å¢ƒçš„è‡ªåŠ¨æµ‹è¯•</a></li>
<li><a href="https://www.jestjs.cn/">Jestä¸­æ–‡æ–‡æ¡£</a></li>
</ul>

      
      
      
    </article>
    


  </main>
  
  <nav class="pagination-single">
    
      <span class="previous">&larr; <a href="https://48474.net/post/gitmoji-210902/" rel="prev">Gitmoji &amp; ä»£ç </a></span>
    
    
      <span class="next"><a href="https://48474.net/post/raspi-wiringpi/" rel="next">æ ‘è“æ´¾4B-WiringPiåº“</a> &rarr;</span>
    
  </nav>


  
  <footer role="contentinfo">
    <div style="text-align:center;">
      
      Â© 2020 135Get_Team. All rights reserved.
    </div>
  </footer>


</div>

<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>



</body>
</html>

